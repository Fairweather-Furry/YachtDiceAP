<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal HTML with JavaScript</title>
</head>
<body>
    <h1>Hello, World!</h1>

    <script type="module">
        // Your JavaScript code goes here
        import { Client } from "https://unpkg.com/archipelago.js@2.0.0-rc5/dist/index.js";

        // Create a new instance of the Client class.
        const client = new Client();

        // Setup a listener for incoming chat messages and print them to the console.
        client.messages
            .on("chatMessage", (message, _, sender) => {
                console.log(`${sender}: ${message}`);
            });

        client.messages
            .on("retrieved", (message, _, sender) => {
                console.log("retrieved!", `${sender}: ${message}`);
            });

            

        // Connect to the Archipelago server (replace url, slot name, and game as appropriate for your scenario).
        await client.login("wss://archipelago.gg:50391", "Player1", "Yacht Dice");

        // Send a message after connecting.
        client.messages.say("Hello, multiworld!")

        // Add 1 to a data storage key.
        client.storage
            .prepare("my_key", 0) /* 0 is the default if the key doesn't exist yet. */
            .replace(45)
            .commit() // Commit changes.

        console.log(await client.storage.fetch([`my_key`], true));
    </script>
</body>
</html>


